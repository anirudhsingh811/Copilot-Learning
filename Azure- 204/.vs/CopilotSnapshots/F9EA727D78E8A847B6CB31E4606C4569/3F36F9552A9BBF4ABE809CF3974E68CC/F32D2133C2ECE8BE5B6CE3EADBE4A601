using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.Logging;

namespace AZ204;

/// <summary>
/// AZ-204 Study Guide - Simple and Easy to Use
/// </summary>
class Program
{
    static async Task Main(string[] args)
    {
        Console.WriteLine("╔════════════════════════════════════════════════════════════════╗");
        Console.WriteLine("║   AZ-204 Study Guide - Azure Developer Certification          ║");
        Console.WriteLine("║   Simple & Easy Reference                                      ║");
        Console.WriteLine("╚════════════════════════════════════════════════════════════════╝");
        Console.WriteLine();

        while (true)
        {
            DisplayMenu();
            var choice = Console.ReadLine()?.Trim();

            try
            {
                switch (choice)
                {
                    case "1":
                        DisplayAppServiceExamples();
                        break;
                    case "2":
                        DisplayFunctionsExamples();
                        break;
                    case "3":
                        DisplayContainerInstancesExamples();
                        break;
                    case "4":
                        DisplayAksExamples();
                        break;
                    case "5":
                        DisplayContainerAppsExamples();
                        break;
                    case "6":
                        DisplayStorageExamples();
                        break;
                    case "7":
                        DisplayArchitecturePatterns();
                        break;
                    case "8":
                        DisplayBestPractices();
                        break;
                    case "9":
                        DisplayExamTips();
                        break;
                    case "0":
                        Console.WriteLine("\n✅ Goodbye! Good luck with your AZ-204 certification!");
                        return;
                    default:
                        Console.WriteLine("\n❌ Invalid choice. Please try again.\n");
                        break;
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"\n❌ Error: {ex.Message}\n");
            }

            Console.WriteLine("\n📖 Press any key to continue...");
            Console.ReadKey();
            Console.Clear();
        }
    }

    static void DisplayMenu()
    {
        Console.WriteLine("\n┌─────────────────────────────────────────────────────────┐");
        Console.WriteLine("│  AZ-204 STUDY GUIDE - Select a topic:                  │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  1. Azure App Service                                   │");
        Console.WriteLine("│  2. Azure Functions                                     │");
        Console.WriteLine("│  3. Azure Container Instances                           │");
        Console.WriteLine("│  4. Azure Kubernetes Service (AKS)                      │");
        Console.WriteLine("│  5. Azure Container Apps                                │");
        Console.WriteLine("│  6. Azure Storage (Blob, Cosmos DB, Queue, Table)       │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  7. Architecture Patterns                               │");
        Console.WriteLine("│  8. Best Practices & Security                           │");
        Console.WriteLine("│  9. Exam Tips                                           │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  0. Exit                                                │");
        Console.WriteLine("└─────────────────────────────────────────────────────────┘");
        Console.Write("\n👉 Enter your choice: ");
    }

    static void DisplayAppServiceExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE APP SERVICE");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 WHAT IS AZURE APP SERVICE?");
        Console.WriteLine("   • Fully managed platform (PaaS) for web apps, APIs, and mobile backends");
        Console.WriteLine("   • Supports: .NET, Java, Node.js, Python, PHP, Ruby");
        Console.WriteLine("   • Built-in CI/CD, SSL, custom domains, authentication\n");

        Console.WriteLine("🎯 KEY FEATURES FOR AZ-204:\n");

        Console.WriteLine("1. DEPLOYMENT SLOTS (⭐ EXAM FAVORITE!)");
        Console.WriteLine("   • Create staging environments (staging, dev, qa)");
        Console.WriteLine("   • Swap slots for zero-downtime deployment");
        Console.WriteLine("   • Test in production with traffic routing (10%, 25%, 50%)");
        Console.WriteLine("   • Rollback instantly if issues occur\n");
        Console.WriteLine("   💡 Exam Tip: Know the difference between:");
        Console.WriteLine("      - Slot settings (stay with slot): connection strings, app settings with 'slot setting' checked");
        Console.WriteLine("      - Regular settings (swap with app): most configs\n");

        Console.WriteLine("2. APP SERVICE PLANS");
        Console.WriteLine("   ┌──────────┬──────────┬─────────────────────────┐");
        Console.WriteLine("   │ Tier     │ Use Case │ Key Features            │");
        Console.WriteLine("   ├──────────┼──────────┼─────────────────────────┤");
        Console.WriteLine("   │ Free/    │ Dev/Test │ Shared compute, no SLA  │");
        Console.WriteLine("   │ Shared   │          │                         │");
        Console.WriteLine("   ├──────────┼──────────┼─────────────────────────┤");
        Console.WriteLine("   │ Basic    │ Low      │ Dedicated VMs, no slots │");
        Console.WriteLine("   │          │ traffic  │                         │");
        Console.WriteLine("   ├──────────┼──────────┼─────────────────────────┤");
        Console.WriteLine("   │ Standard │ Prod     │ Slots, auto-scale, SSL  │");
        Console.WriteLine("   ├──────────┼──────────┼─────────────────────────┤");
        Console.WriteLine("   │ Premium  │ High     │ Better perf, more slots │");
        Console.WriteLine("   ├──────────┼──────────┼─────────────────────────┤");
        Console.WriteLine("   │ Isolated │ Max      │ Private VNet, dedicated │");
        Console.WriteLine("   │          │ security │ App Service Environment │");
        Console.WriteLine("   └──────────┴──────────┴─────────────────────────┘\n");

        Console.WriteLine("3. AUTO-SCALING");
        Console.WriteLine("   • Scale Out: Add more VM instances (2, 5, 10...)");
        Console.WriteLine("   • Scale Up: Bigger VM size (more CPU/RAM)");
        Console.WriteLine("   • Rules: CPU %, Memory %, HTTP Queue, Custom metrics\n");

        Console.WriteLine("4. AUTHENTICATION");
        Console.WriteLine("   Built-in auth providers:");
        Console.WriteLine("   ✓ Microsoft Entra ID (Azure AD)");
        Console.WriteLine("   ✓ Facebook, Google, Twitter");
        Console.WriteLine("   ✓ OpenID Connect");
        Console.WriteLine("   • No code changes needed!");
        Console.WriteLine("   • Tokens automatically managed\n");

        Console.WriteLine("💻 COMMON EXAM SCENARIOS:\n");
        Console.WriteLine("Q: Zero-downtime deployment?");
        Console.WriteLine("A: Use deployment slots → deploy to staging → swap\n");

        Console.WriteLine("Q: App needs more memory?");
        Console.WriteLine("A: Scale Up (change App Service Plan tier)\n");

        Console.WriteLine("Q: Handle traffic spikes?");
        Console.WriteLine("A: Scale Out (add instances) with auto-scale rules\n");

        Console.WriteLine("Q: Test new version with 10% of users?");
        Console.WriteLine("A: Deployment slots with traffic routing (90% prod, 10% staging)\n");

        Console.WriteLine("📚 REMEMBER FOR EXAM:");
        Console.WriteLine("   ✓ Slots require Standard tier or higher");
        Console.WriteLine("   ✓ Maximum 5 slots (production + 4 additional)");
        Console.WriteLine("   ✓ Warm-up happens automatically during swap");
        Console.WriteLine("   ✓ Settings with 'Slot Setting' checkbox stay with slot");
        Console.WriteLine("   ✓ Custom domains work with all slots");
    }

    static void DisplayFunctionsExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE FUNCTIONS - SERVERLESS COMPUTE");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 WHAT ARE AZURE FUNCTIONS?");
        Console.WriteLine("   • Serverless event-driven compute");
        Console.WriteLine("   • Pay only for execution time");
        Console.WriteLine("   • Auto-scales based on demand");
        Console.WriteLine("   • Supports: C#, JavaScript, Python, PowerShell, Java\n");

        Console.WriteLine("🎯 HOSTING PLANS (⭐ EXAM FAVORITE!):\n");
        Console.WriteLine("┌─────────────┬──────────────┬─────────────┬──────────┐");
        Console.WriteLine("│ Plan        │ Scaling      │ Cold Start  │ Cost     │");
        Console.WriteLine("├─────────────┼──────────────┼─────────────┼──────────┤");
        Console.WriteLine("│ Consumption │ Automatic    │ Yes (1-10s) │ Per exec │");
        Console.WriteLine("│             │ (event-based)│             │          │");
        Console.WriteLine("├─────────────┼──────────────┼─────────────┼──────────┤");
        Console.WriteLine("│ Premium     │ Pre-warmed   │ No          │ Higher   │");
        Console.WriteLine("│             │ instances    │             │          │");
        Console.WriteLine("├─────────────┼──────────────┼─────────────┼──────────┤");
        Console.WriteLine("│ Dedicated   │ Manual/Auto  │ No          │ App      │");
        Console.WriteLine("│ (App Svc)   │              │             │ Service  │");
        Console.WriteLine("└─────────────┴──────────────┴─────────────┴──────────┘\n");

        Console.WriteLine("🔌 TRIGGERS (⭐ KNOW THESE!):\n");
        Console.WriteLine("1. HTTP Trigger - REST API, webhooks");
        Console.WriteLine("2. Timer Trigger - Scheduled tasks (CRON)");
        Console.WriteLine("3. Blob Trigger - New file uploaded");
        Console.WriteLine("4. Queue Trigger - Process queue messages");
        Console.WriteLine("5. Service Bus Trigger - Enterprise messaging");
        Console.WriteLine("6. Event Grid Trigger - React to Azure events");
        Console.WriteLine("7. Cosmos DB Trigger - Database changes\n");

        Console.WriteLine("🔗 BINDINGS:");
        Console.WriteLine("   • Input Binding: Read data (Blob, Table, Cosmos DB)");
        Console.WriteLine("   • Output Binding: Write data");
        Console.WriteLine("   • Direction: 'in', 'out', 'inout'\n");

        Console.WriteLine("💡 CODE EXAMPLE:");
        Console.WriteLine("```csharp");
        Console.WriteLine("[FunctionName(\"ProcessOrder\")]");
        Console.WriteLine("public static async Task Run(");
        Console.WriteLine("    [QueueTrigger(\"orders\")] string orderJson,           // Input");
        Console.WriteLine("    [CosmosDB(\"orders\", \"processed\")] IAsyncCollector<Order> output)  // Output");
        Console.WriteLine("{");
        Console.WriteLine("    var order = JsonSerializer.Deserialize<Order>(orderJson);");
        Console.WriteLine("    // Process order logic");
        Console.WriteLine("    await output.AddAsync(order);");
        Console.WriteLine("}");
        Console.WriteLine("```\n");

        Console.WriteLine("🎭 DURABLE FUNCTIONS PATTERNS:");
        Console.WriteLine("   1. Function Chaining - Step 1 → Step 2 → Step 3");
        Console.WriteLine("   2. Fan-out/Fan-in - Parallel tasks → Aggregate results");
        Console.WriteLine("   3. Async HTTP APIs - Long-running status checks");
        Console.WriteLine("   4. Monitoring - Periodic checks");
        Console.WriteLine("   5. Human Interaction - Wait for approval");
        Console.WriteLine("   6. Aggregator - Collect events\n");

        Console.WriteLine("💻 COMMON EXAM SCENARIOS:\n");
        Console.WriteLine("Q: Process 10,000 files uploaded to blob storage?");
        Console.WriteLine("A: Blob trigger function with Queue output binding\n");

        Console.WriteLine("Q: Function takes 10 seconds to start (cold start)?");
        Console.WriteLine("A: Use Premium plan or keep warm with timer trigger\n");

        Console.WriteLine("Q: Need guaranteed execution order?");
        Console.WriteLine("A: Service Bus with sessions, not Queue trigger\n");

        Console.WriteLine("📚 REMEMBER FOR EXAM:");
        Console.WriteLine("   ✓ Consumption plan: 5-minute timeout (default), 10-minute max");
        Console.WriteLine("   ✓ Premium plan: No timeout limit");
        Console.WriteLine("   ✓ Cold start: Consumption plan only");
        Console.WriteLine("   ✓ Durable Functions: State persisted in Storage");
        Console.WriteLine("   ✓ Scaling: 200 instances max (Consumption)");
    }

    static void DisplayContainerInstancesExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE CONTAINER INSTANCES (ACI)");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 WHAT IS ACI?");
        Console.WriteLine("   • Run Docker containers without managing VMs");
        Console.WriteLine("   • Fast startup (seconds)");
        Console.WriteLine("   • Pay per second");
        Console.WriteLine("   • No orchestration overhead\n");

        Console.WriteLine("🎯 KEY FEATURES:\n");
        Console.WriteLine("1. CONTAINER GROUPS");
        Console.WriteLine("   • Multiple containers on same host");
        Console.WriteLine("   • Share lifecycle, network, storage");
        Console.WriteLine("   • Example: App + Logging sidecar\n");

        Console.WriteLine("2. NETWORKING");
        Console.WriteLine("   • Public IP or private VNet");
        Console.WriteLine("   • DNS name label");
        Console.WriteLine("   • Expose specific ports\n");

        Console.WriteLine("3. STORAGE");
        Console.WriteLine("   • Azure Files mount");
        Console.WriteLine("   • Empty directory");
        Console.WriteLine("   • Git repo\n");

        Console.WriteLine("⚡ WHEN TO USE:\n");
        Console.WriteLine("✓ Batch jobs, data processing");
        Console.WriteLine("✓ Build agents, testing");
        Console.WriteLine("✓ Event-driven tasks");
        Console.WriteLine("✓ Simple web apps");
        Console.WriteLine("✗ Long-running (use AKS)");
        Console.WriteLine("✗ Complex microservices (use AKS)\n");

        Console.WriteLine("💻 EXAM SCENARIO:");
        Console.WriteLine("Q: Need to process ML inference with GPU?");
        Console.WriteLine("A: ACI with GPU support (K80, P100, V100)");
    }

    static void DisplayAksExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE KUBERNETES SERVICE (AKS)");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 WHAT IS AKS?");
        Console.WriteLine("   • Managed Kubernetes service");
        Console.WriteLine("   • Free control plane");
        Console.WriteLine("   • Pay only for worker nodes (VMs)");
        Console.WriteLine("   • Full Kubernetes capabilities\n");

        Console.WriteLine("🎯 KEY CONCEPTS:\n");
        Console.WriteLine("1. NODE POOLS");
        Console.WriteLine("   • System pool: Kubernetes system components");
        Console.WriteLine("   • User pool: Your applications");
        Console.WriteLine("   • Different VM sizes per pool");
        Console.WriteLine("   • Availability zones for HA\n");

        Console.WriteLine("2. SCALING");
        Console.WriteLine("   • HPA (Horizontal Pod Autoscaler): Scale pods");
        Console.WriteLine("   • Cluster Autoscaler: Scale nodes");
        Console.WriteLine("   • KEDA: Event-driven scaling\n");

        Console.WriteLine("3. NETWORKING");
        Console.WriteLine("   • kubenet: Basic, limited");
        Console.WriteLine("   • Azure CNI: Each pod gets VNet IP");
        Console.WriteLine("   • Network policies for security\n");

        Console.WriteLine("💻 EXAM SCENARIOS:\n");
        Console.WriteLine("Q: Microservices with complex networking?");
        Console.WriteLine("A: AKS with Azure CNI\n");

        Console.WriteLine("Q: High costs in AKS?");
        Console.WriteLine("A: Use spot VMs, enable autoscaler, right-size pods");
    }

    static void DisplayContainerAppsExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE CONTAINER APPS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 WHAT ARE CONTAINER APPS?");
        Console.WriteLine("   • Serverless container platform");
        Console.WriteLine("   • Built on Kubernetes (abstracted)");
        Console.WriteLine("   • Auto-scale to zero");
        Console.WriteLine("   • Built-in Dapr support\n");

        Console.WriteLine("🎯 KEY FEATURES:\n");
        Console.WriteLine("1. DAPR (Distributed Application Runtime)");
        Console.WriteLine("   • Service-to-service calls");
        Console.WriteLine("   • State management");
        Console.WriteLine("   • Pub/Sub messaging");
        Console.WriteLine("   • Secret management\n");

        Console.WriteLine("2. REVISIONS & TRAFFIC SPLITTING");
        Console.WriteLine("   • Multiple versions running");
        Console.WriteLine("   • Traffic percentage: 80% v1, 20% v2");
        Console.WriteLine("   • Blue-green, canary deployments\n");

        Console.WriteLine("3. KEDA AUTO-SCALING");
        Console.WriteLine("   • HTTP requests");
        Console.WriteLine("   • Queue depth");
        Console.WriteLine("   • Custom metrics");
        Console.WriteLine("   • Scale to zero!\n");

        Console.WriteLine("⚡ WHEN TO USE:");
        Console.WriteLine("✓ Microservices");
        Console.WriteLine("✓ Event-driven apps");
        Console.WriteLine("✓ API backends");
        Console.WriteLine("✓ Need Dapr");
        Console.WriteLine("✗ Need full Kubernetes control → Use AKS");
    }

    static void DisplayStorageExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE STORAGE");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📦 BLOB STORAGE (⭐ EXAM FAVORITE!)\n");
        Console.WriteLine("Storage Tiers:");
        Console.WriteLine("   • Hot: Frequent access, highest storage cost");
        Console.WriteLine("   • Cool: Infrequent (30+ days), lower storage cost");
        Console.WriteLine("   • Archive: Rare access (180+ days), lowest cost, hours to retrieve\n");

        Console.WriteLine("SAS Tokens:");
        Console.WriteLine("   • Delegate access without sharing keys");
        Console.WriteLine("   • Set permissions: Read, Write, Delete, List");
        Console.WriteLine("   • Expiration time");
        Console.WriteLine("   • IP restrictions\n");

        Console.WriteLine("📊 COSMOS DB\n");
        Console.WriteLine("Consistency Levels (⭐ KNOW ORDER!):");
        Console.WriteLine("   1. Strong - Highest consistency, highest latency");
        Console.WriteLine("   2. Bounded Staleness");
        Console.WriteLine("   3. Session (DEFAULT) - Read your writes");
        Console.WriteLine("   4. Consistent Prefix");
        Console.WriteLine("   5. Eventual - Lowest consistency, lowest latency\n");

        Console.WriteLine("Partition Keys:");
        Console.WriteLine("   • Choose high cardinality (many unique values)");
        Console.WriteLine("   • Even distribution");
        Console.WriteLine("   • Example: CustomerId, UserId, TenantId\n");

        Console.WriteLine("💻 EXAM SCENARIOS:\n");
        Console.WriteLine("Q: Store 10TB of logs, accessed once a year?");
        Console.WriteLine("A: Blob Storage, Archive tier\n");

        Console.WriteLine("Q: Global app, users read their own data?");
        Console.WriteLine("A: Cosmos DB, Session consistency\n");

        Console.WriteLine("Q: Temporary access to blob for 1 hour?");
        Console.WriteLine("A: SAS token with 1-hour expiration");
    }

    static void DisplayArchitecturePatterns()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  ARCHITECTURE PATTERNS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("🏗️ COMMON PATTERNS:\n");

        Console.WriteLine("1. API GATEWAY");
        Console.WriteLine("   • Single entry point");
        Console.WriteLine("   • Routing, auth, rate limiting");
        Console.WriteLine("   • Use: Azure API Management\n");

        Console.WriteLine("2. RETRY PATTERN");
        Console.WriteLine("   • Exponential backoff");
        Console.WriteLine("   • Max retries: 3-5");
        Console.WriteLine("   • Use: Polly library\n");

        Console.WriteLine("3. CIRCUIT BREAKER");
        Console.WriteLine("   • Fail fast when service down");
        Console.WriteLine("   • Prevent cascade failures");
        Console.WriteLine("   • States: Closed → Open → Half-Open\n");

        Console.WriteLine("4. CQRS (Command Query Responsibility Segregation)");
        Console.WriteLine("   • Separate read and write models");
        Console.WriteLine("   • Optimize each independently");
        Console.WriteLine("   • Use: Functions + Cosmos DB\n");

        Console.WriteLine("5. EVENT SOURCING");
        Console.WriteLine("   • Store events, not current state");
        Console.WriteLine("   • Replay for audit/debug");
        Console.WriteLine("   • Use: Blob Storage or Cosmos DB");
    }

    static void DisplayBestPractices()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  BEST PRACTICES & SECURITY");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("🔒 SECURITY:\n");
        Console.WriteLine("1. USE MANAGED IDENTITIES");
        Console.WriteLine("   • No credentials in code");
        Console.WriteLine("   • Automatic credential rotation");
        Console.WriteLine("   • Works with: App Service, Functions, VMs\n");

        Console.WriteLine("2. STORE SECRETS IN KEY VAULT");
        Console.WriteLine("   • Never hardcode connection strings");
        Console.WriteLine("   • Reference from Key Vault");
        Console.WriteLine("   • Enable soft delete\n");

        Console.WriteLine("3. NETWORK SECURITY");
        Console.WriteLine("   • Private Endpoints");
        Console.WriteLine("   • Network Security Groups");
        Console.WriteLine("   • VNet integration\n");

        Console.WriteLine("⚡ PERFORMANCE:\n");
        Console.WriteLine("   • Use CDN for static content");
        Console.WriteLine("   • Implement caching (Redis)");
        Console.WriteLine("   • Async operations");
        Console.WriteLine("   • Connection pooling\n");

        Console.WriteLine("💰 COST OPTIMIZATION:\n");
        Console.WriteLine("   • Auto-scaling");
        Console.WriteLine("   • Right-size resources");
        Console.WriteLine("   • Reserved instances");
        Console.WriteLine("   • Spot VMs for non-critical");
    }

    static void DisplayExamTips()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZ-204 EXAM TIPS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📝 EXAM FORMAT:");
        Console.WriteLine("   • 40-60 questions");
        Console.WriteLine("   • 150 minutes (2.5 hours)");
        Console.WriteLine("   • Passing score: 700/1000");
        Console.WriteLine("   • No penalty for wrong answers → GUESS!\n");

        Console.WriteLine("🎯 WHAT TO MEMORIZE:\n");
        Console.WriteLine("   ✓ App Service tiers and features");
        Console.WriteLine("   ✓ Function hosting plans comparison");
        Console.WriteLine("   ✓ Cosmos DB consistency levels (order!)");
        Console.WriteLine("   ✓ Storage tiers and when to use");
        Console.WriteLine("   ✓ ACI vs AKS vs Container Apps");
        Console.WriteLine("   ✓ Triggers and bindings for Functions\n");

        Console.WriteLine("💡 COMMON EXAM PATTERNS:\n");
        Console.WriteLine("   • \"Zero downtime\" → Deployment slots");
        Console.WriteLine("   • \"Lowest cost\" → Consumption plan, Archive tier");
        Console.WriteLine("   • \"Highest performance\" → Premium, Hot tier");
        Console.WriteLine("   • \"Scale to zero\" → Functions Consumption, Container Apps");
        Console.WriteLine("   • \"Global distribution\" → Cosmos DB\n");

        Console.WriteLine("🚫 COMMON MISTAKES:");
        Console.WriteLine("   • Confusing scale up vs scale out");
        Console.WriteLine("   • Not knowing slot settings vs regular settings");
        Console.WriteLine("   • Forgetting Basic tier has NO deployment slots");
        Console.WriteLine("   • Mixing up binding directions (in, out)\n");

        Console.WriteLine("⏰ TIME MANAGEMENT:");
        Console.WriteLine("   • 2-3 minutes per question");
        Console.WriteLine("   • Mark and skip hard ones");
        Console.WriteLine("   • Review flagged questions");
        Console.WriteLine("   • Don't leave blanks!\n");

        Console.WriteLine("📚 FINAL PREP:");
        Console.WriteLine("   1. Do Microsoft Learn modules (FREE!)");
        Console.WriteLine("   2. Practice exams (MeasureUp, Whizlabs)");
        Console.WriteLine("   3. Hands-on labs (CRITICAL!)");
        Console.WriteLine("   4. Review this guide");
        Console.WriteLine("   5. Get good sleep!");
    }
}

    {
        var host = Host.CreateDefaultBuilder(args)
            .ConfigureAppConfiguration((context, config) =>
            {
                config.AddJsonFile("appsettings.json", optional: true);
                config.AddEnvironmentVariables();
                config.AddUserSecrets<Program>(optional: true);
            })
            .ConfigureServices((context, services) =>
            {
                // Configure enterprise services
                AppServiceConfiguration.ConfigureEnterpriseServices(services, context.Configuration);
                
                services.AddLogging(builder =>
                {
                    builder.AddConsole();
                    builder.AddDebug();
                });
                
                services.AddHttpClient();
            })
            .Build();

        var logger = host.Services.GetRequiredService<ILogger<Program>>();
        var configuration = host.Services.GetRequiredService<IConfiguration>();

        Console.WriteLine("╔════════════════════════════════════════════════════════════════╗");
        Console.WriteLine("║   AZ-204 Module 1: Develop Azure Compute Solutions            ║");
        Console.WriteLine("║   Enterprise Architect-Level Examples                          ║");
        Console.WriteLine("╚════════════════════════════════════════════════════════════════╝");
        Console.WriteLine();

        while (true)
        {
            DisplayMenu();
            var choice = Console.ReadLine()?.Trim();

            try
            {
                switch (choice)
                {
                    case "1":
                        await DisplayAppServiceExamplesAsync(host.Services, logger, configuration);
                        break;
                    case "2":
                        DisplayFunctionsExamples();
                        break;
                    case "3":
                        DisplayContainerInstancesExamples();
                        break;
                    case "4":
                        DisplayAksExamples();
                        break;
                    case "5":
                        DisplayContainerAppsExamples();
                        break;
                    case "6":
                        DisplayArchitecturePatterns();
                        break;
                    case "7":
                        DisplayBestPractices();
                        break;
                    case "8":
                        DisplayInterviewQuestions();
                        break;
                    case "9":
                        DisplayExamTips();
                        break;
                    case "0":
                        Console.WriteLine("\n✅ Goodbye! Good luck with your AZ-204 certification!");
                        return;
                    default:
                        Console.WriteLine("\n❌ Invalid choice. Please try again.\n");
                        break;
                }
            }
            catch (Exception ex)
            {
                logger.LogError(ex, "An error occurred");
                Console.WriteLine($"\n❌ Error: {ex.Message}\n");
            }

            Console.WriteLine("\nPress any key to continue...");
            Console.ReadKey();
            Console.Clear();
        }
    }

    static void DisplayMenu()
    {
        Console.WriteLine("\n┌─────────────────────────────────────────────────────────┐");
        Console.WriteLine("│  MAIN MENU - Select a topic:                           │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  1. Azure App Service (Enterprise Patterns)            │");
        Console.WriteLine("│  2. Azure Functions (Durable Functions & Events)       │");
        Console.WriteLine("│  3. Azure Container Instances (Multi-container)        │");
        Console.WriteLine("│  4. Azure Kubernetes Service (Production AKS)          │");
        Console.WriteLine("│  5. Azure Container Apps (Microservices & Dapr)        │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  6. Architecture Patterns & Design Decisions           │");
        Console.WriteLine("│  7. Best Practices & Security                          │");
        Console.WriteLine("│  8. Interview Questions (Advanced)                     │");
        Console.WriteLine("│  9. AZ-204 Exam Tips for Architects                    │");
        Console.WriteLine("├─────────────────────────────────────────────────────────┤");
        Console.WriteLine("│  0. Exit                                               │");
        Console.WriteLine("└─────────────────────────────────────────────────────────┘");
        Console.Write("\nEnter your choice: ");
    }

    static async Task DisplayAppServiceExamplesAsync(
        IServiceProvider services,
        ILogger<Program> logger,
        IConfiguration configuration)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE APP SERVICE - ENTERPRISE PATTERNS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        while (true)
        {
            Console.WriteLine("\n┌─────────────────────────────────────────────────────────┐");
            Console.WriteLine("│  APP SERVICE DEMO OPTIONS:                              │");
            Console.WriteLine("├─────────────────────────────────────────────────────────┤");
            Console.WriteLine("│  1. Load Secrets from Key Vault                         │");
            Console.WriteLine("│  2. Test Health Checks                                  │");
            Console.WriteLine("│  3. Simulate Blue-Green Deployment                      │");
            Console.WriteLine("│  4. Create Deployment Slot                              │");
            Console.WriteLine("│  5. Delete Deployment Slot                              │");
            Console.WriteLine("│  6. View Documentation                                  │");
            Console.WriteLine("│  0. Back to Main Menu                                   │");
            Console.WriteLine("└─────────────────────────────────────────────────────────┘");
            Console.Write("\nEnter your choice: ");

            var choice = Console.ReadLine()?.Trim();

            try
            {
                switch (choice)
                {
                    case "1":
                        await LoadSecretsDemo(services, logger, configuration);
                        break;
                    case "2":
                        await TestHealthChecksDemo(services, logger);
                        break;
                    case "3":
                        await BlueGreenDeploymentDemo(logger, configuration);
                        break;
                    case "4":
                        await CreateDeploymentSlotDemo(logger, configuration);
                        break;
                    case "5":
                        await DeleteDeploymentSlotDemo(logger, configuration);
                        break;
                    case "6":
                        DisplayAppServiceDocumentation();
                        break;
                    case "0":
                        return;
                    default:
                        Console.WriteLine("\n❌ Invalid choice. Please try again.");
                        break;
                }
            }
            catch (Exception ex)
            {
                logger.LogError(ex, "Error in App Service demo");
                Console.WriteLine($"\n❌ Error: {ex.Message}");
            }

            Console.WriteLine("\nPress any key to continue...");
            Console.ReadKey();
            Console.Clear();
        }
    }

    static async Task LoadSecretsDemo(
        IServiceProvider services,
        ILogger<Program> logger,
        IConfiguration configuration)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  LOADING SECRETS FROM AZURE KEY VAULT");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        try
        {
            var keyVaultUri = configuration["KeyVault:Uri"];
            
            Console.WriteLine("📋 Configured Key Vault URI: " + 
                (keyVaultUri ?? "Not configured (using demo mode)"));
            
            if (string.IsNullOrEmpty(keyVaultUri))
            {
                Console.WriteLine("\n⚠️  Key Vault not configured. Please add to appsettings.json:");
                Console.WriteLine("   {");
                Console.WriteLine("     \"KeyVault\": {");
                Console.WriteLine("       \"Uri\": \"https://your-keyvault.vault.azure.net/\"");
                Console.WriteLine("     }");
                Console.WriteLine("   }");
                return;
            }

            Console.WriteLine("\n🔐 Authentication Methods (in order of precedence):");
            Console.WriteLine("   1. Environment Variables (AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET)");
            Console.WriteLine("   2. Managed Identity (when running in Azure)");
            Console.WriteLine("   3. Azure CLI (az login)");
            Console.WriteLine("   4. Visual Studio Account");
            Console.WriteLine("   5. VS Code Azure Account Extension");
            Console.WriteLine("   6. Interactive Browser Login\n");

            var telemetryClient = services.GetService<TelemetryClient>() ?? new TelemetryClient();
            var loggerFactory = services.GetRequiredService<ILoggerFactory>();
            var configLogger = loggerFactory.CreateLogger<AppServiceConfiguration>();
            var appServiceConfig = new AppServiceConfiguration(configuration, configLogger, telemetryClient);

            Console.WriteLine("🔄 Attempting to load secrets...\n");

            var secrets = await appServiceConfig.LoadSecretsFromKeyVaultAsync();

            if (secrets.Count > 0)
            {
                Console.WriteLine($"✅ Successfully loaded {secrets.Count} secrets:");
                foreach (var secret in secrets)
                {
                    Console.WriteLine($"   • {secret.Key}: {new string('*', 20)}");
                }
            }
            else
            {
                Console.WriteLine("ℹ️  No secrets were loaded. Possible reasons:");
                Console.WriteLine("   1. Authentication failed - Run 'az login' or ensure you're logged into Visual Studio");
                Console.WriteLine("   2. No permissions - Grant yourself 'Key Vault Secrets User' role");
                Console.WriteLine("   3. Secrets don't exist - Create secrets in your Key Vault:");
                Console.WriteLine("      • DatabaseConnectionString");
                Console.WriteLine("      • ApiKey");
                Console.WriteLine("      • StorageAccountKey\n");
                
                Console.WriteLine("🔧 Quick Setup Commands:");
                Console.WriteLine("   # Login to Azure");
                Console.WriteLine("   az login");
                Console.WriteLine();
                Console.WriteLine("   # Set your subscription");
                Console.WriteLine("   az account set --subscription \"your-subscription-id\"");
                Console.WriteLine();
                Console.WriteLine("   # Grant yourself access to Key Vault");
                Console.WriteLine($"   az keyvault set-policy --name kv-az204-9199 \\");
                Console.WriteLine("     --upn your-email@domain.com \\");
                Console.WriteLine("     --secret-permissions get list");
                Console.WriteLine();
                Console.WriteLine("   # Create test secrets");
                Console.WriteLine("   az keyvault secret set --vault-name kv-az204-9199 \\");
                Console.WriteLine("     --name DatabaseConnectionString --value \"Server=...\"");
                Console.WriteLine("   az keyvault secret set --vault-name kv-az204-9199 \\");
                Console.WriteLine("     --name ApiKey --value \"test-api-key-12345\"");
                Console.WriteLine("   az keyvault secret set --vault-name kv-az204-9199 \\");
                Console.WriteLine("     --name StorageAccountKey --value \"test-storage-key\"");
            }
        }
        catch (InvalidOperationException ex)
        {
            Console.WriteLine($"\n❌ Configuration Error: {ex.Message}");
            Console.WriteLine("\n💡 To fix this, please run:");
            Console.WriteLine("   az login");
        }
        catch (Exception ex)
        {
            logger.LogError(ex, "Failed to load secrets");
            Console.WriteLine($"\n❌ Error: {ex.Message}");
            Console.WriteLine($"\n📝 Full Error: {ex.GetType().Name}");
            
            if (ex.InnerException != null)
            {
                Console.WriteLine($"   Inner: {ex.InnerException.Message}");
            }
        }
    }

    static async Task TestHealthChecksDemo(IServiceProvider services, ILogger<Program> logger)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  TESTING HEALTH CHECKS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("🔄 Performing health checks...\n");

        // Simulate health checks
        Console.WriteLine("1️⃣  Database Health Check:");
        await Task.Delay(500);
        Console.WriteLine("   ✅ Status: Healthy");
        Console.WriteLine("   ⏱️  Response Time: 145ms\n");

        Console.WriteLine("2️⃣  Redis Cache Health Check:");
        await Task.Delay(500);
        Console.WriteLine("   ✅ Status: Healthy");
        Console.WriteLine("   ⏱️  Response Time: 23ms\n");

        Console.WriteLine("3️⃣  External API Health Check:");
        await Task.Delay(500);
        Console.WriteLine("   ⚠️  Status: Degraded");
        Console.WriteLine("   ⏱️  Response Time: 3200ms");
        Console.WriteLine("   ℹ️  API is responding but slower than expected\n");

        Console.WriteLine("📊 Overall System Status: Healthy (1 degraded service)");
        Console.WriteLine("\n💡 Health checks are configured in AppServiceConfiguration.cs");
        Console.WriteLine("   • DatabaseHealthCheck");
        Console.WriteLine("   • RedisHealthCheck");
        Console.WriteLine("   • ExternalApiHealthCheck");
    }

    static async Task BlueGreenDeploymentDemo(ILogger<Program> logger, IConfiguration configuration)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  BLUE-GREEN DEPLOYMENT SIMULATION");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📋 Configuration:");
        Console.Write("Enter Subscription ID (or press Enter for demo): ");
        var subscriptionId = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(subscriptionId))
            subscriptionId = "demo-subscription-id";

        Console.Write("Enter Resource Group (or press Enter for demo): ");
        var resourceGroup = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(resourceGroup))
            resourceGroup = "demo-rg";

        Console.Write("Enter Web App Name (or press Enter for demo): ");
        var webAppName = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(webAppName))
            webAppName = "demo-webapp";

        Console.WriteLine("\n🚀 Initiating Blue-Green Deployment...\n");

        var loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());
        var deploymentLogger = loggerFactory.CreateLogger<DeploymentSlotManager>();
        
        var deploymentManager = new DeploymentSlotManager(
            subscriptionId,
            resourceGroup,
            webAppName,
            deploymentLogger);

        var options = new DeploymentOptions
        {
            UseProgressiveRollout = true,
            RolloutPercentages = new[] { 10, 25, 50, 100 },
            AutoRollback = true,
            HealthCheckRetries = 3,
            MonitoringDelayMinutes = 0 // Speed up demo
        };

        Console.WriteLine("⚙️  Deployment Configuration:");
        Console.WriteLine($"   • Progressive Rollout: {options.UseProgressiveRollout}");
        Console.WriteLine($"   • Rollout Steps: {string.Join("% → ", options.RolloutPercentages)}%");
        Console.WriteLine($"   • Auto Rollback: {options.AutoRollback}");
        Console.WriteLine($"   • Health Check Retries: {options.HealthCheckRetries}\n");

        var result = await deploymentManager.PerformBlueGreenDeploymentAsync(
            sourceSlot: "production",
            targetSlot: "staging",
            options: options);

        Console.WriteLine("\n═══════════════════════════════════════════════════════════");
        Console.WriteLine("  DEPLOYMENT RESULT");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        if (result.Success)
        {
            Console.WriteLine("✅ Deployment Status: SUCCESS");
            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("   ██████████████████████████████████████████ 100%");
            Console.ResetColor();
        }
        else
        {
            Console.WriteLine("❌ Deployment Status: FAILED");
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine($"   Error: {result.ErrorMessage}");
            Console.ResetColor();
        }

        Console.WriteLine($"\n⏱️  Duration: {result.Duration.TotalSeconds:F2} seconds");
        Console.WriteLine($"📊 Phases Completed: {result.Phases.Count}");
        Console.WriteLine("\n📝 Deployment Phases:");
        foreach (var phase in result.Phases)
        {
            Console.WriteLine($"   ✓ {phase}");
        }
    }

    static async Task CreateDeploymentSlotDemo(ILogger<Program> logger, IConfiguration configuration)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  CREATE DEPLOYMENT SLOT");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.Write("Enter slot name (e.g., staging, dev, qa): ");
        var slotName = Console.ReadLine()?.Trim();

        if (string.IsNullOrWhiteSpace(slotName))
        {
            Console.WriteLine("❌ Slot name cannot be empty.");
            return;
        }

        Console.Write("Clone from slot (default: production): ");
        var cloneFrom = Console.ReadLine()?.Trim();
        if (string.IsNullOrWhiteSpace(cloneFrom))
            cloneFrom = "production";

        var loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());
        var deploymentLogger = loggerFactory.CreateLogger<DeploymentSlotManager>();
        
        var deploymentManager = new DeploymentSlotManager(
            "demo-subscription",
            "demo-rg",
            "demo-webapp",
            deploymentLogger);

        Console.WriteLine($"\n🔄 Creating deployment slot '{slotName}' from '{cloneFrom}'...\n");

        var success = await deploymentManager.CreateDeploymentSlotAsync(slotName, cloneFrom);

        if (success)
        {
            Console.WriteLine($"✅ Deployment slot '{slotName}' created successfully!");
            Console.WriteLine($"\n📍 URL: https://demo-webapp-{slotName}.azurewebsites.net");
            Console.WriteLine("\n💡 You can now deploy your code to this slot and test before swapping to production.");
        }
        else
        {
            Console.WriteLine($"❌ Failed to create deployment slot '{slotName}'");
        }
    }

    static async Task DeleteDeploymentSlotDemo(ILogger<Program> logger, IConfiguration configuration)
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  DELETE DEPLOYMENT SLOT");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.Write("Enter slot name to delete: ");
        var slotName = Console.ReadLine()?.Trim();

        if (string.IsNullOrWhiteSpace(slotName))
        {
            Console.WriteLine("❌ Slot name cannot be empty.");
            return;
        }

        if (slotName.Equals("production", StringComparison.OrdinalIgnoreCase))
        {
            Console.WriteLine("❌ Cannot delete the production slot!");
            return;
        }

        Console.Write($"⚠️  Are you sure you want to delete slot '{slotName}'? (yes/no): ");
        var confirmation = Console.ReadLine()?.Trim().ToLower();

        if (confirmation != "yes")
        {
            Console.WriteLine("❌ Deletion cancelled.");
            return;
        }

        var loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());
        var deploymentLogger = loggerFactory.CreateLogger<DeploymentSlotManager>();
        
        var deploymentManager = new DeploymentSlotManager(
            "demo-subscription",
            "demo-rg",
            "demo-webapp",
            deploymentLogger);

        Console.WriteLine($"\n🔄 Deleting deployment slot '{slotName}'...\n");

        var success = await deploymentManager.DeleteDeploymentSlotAsync(slotName);

        if (success)
        {
            Console.WriteLine($"✅ Deployment slot '{slotName}' deleted successfully!");
        }
        else
        {
            Console.WriteLine($"❌ Failed to delete deployment slot '{slotName}'");
        }
    }

    static void DisplayAppServiceDocumentation()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE APP SERVICE - DOCUMENTATION");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📁 Implementation Files:");
        Console.WriteLine("   • 01-AppService/AppServiceConfiguration.cs");
        Console.WriteLine("   • 01-AppService/DeploymentSlotManager.cs\n");

        Console.WriteLine("🎯 Key Features Implemented:\n");

        Console.WriteLine("1. Enterprise Configuration:");
        Console.WriteLine("   ✓ Key Vault integration with Managed Identity");
        Console.WriteLine("   ✓ Application Insights with custom telemetry");
        Console.WriteLine("   ✓ Distributed caching (Redis)");
        Console.WriteLine("   ✓ Health checks (database, redis, external APIs)");
        Console.WriteLine("   ✓ HTTP client with Polly resilience policies\n");

        Console.WriteLine("2. Blue-Green Deployments:");
        Console.WriteLine("   ✓ Automated slot swap with validation");
        Console.WriteLine("   ✓ Progressive traffic routing (10% → 100%)");
        Console.WriteLine("   ✓ Health check verification");
        Console.WriteLine("   ✓ Automatic rollback on failure");
        Console.WriteLine("   ✓ Warm-up URLs for performance\n");

        Console.WriteLine("🏗️ Architecture Patterns:");
        Console.WriteLine("   • Circuit Breaker Pattern (Polly)");
        Console.WriteLine("   • Retry with Exponential Backoff");
        Console.WriteLine("   • Health Check Pattern");
        Console.WriteLine("   • Secrets Management Pattern\n");

        Console.WriteLine("📊 Monitoring:");
        Console.WriteLine("   • Custom telemetry initializers");
        Console.WriteLine("   • Background metrics collection");
        Console.WriteLine("   • Deployment phase tracking");
        Console.WriteLine("   • Error rate monitoring\n");

        Console.WriteLine("💰 Cost Optimization:");
        Console.WriteLine("   • Auto-scaling based on metrics");
        Console.WriteLine("   • Scale down during off-hours");
        Console.WriteLine("   • Use appropriate tier (Basic/Standard/Premium)");
        Console.WriteLine("   • Reserved instances for production\n");

        Console.WriteLine("🔒 Security:");
        Console.WriteLine("   • Managed Identity for Azure services");
        Console.WriteLine("   • Key Vault for secrets");
        Console.WriteLine("   • HTTPS only");
        Console.WriteLine("   • IP restrictions");
    }

    static void DisplayFunctionsExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE FUNCTIONS - DURABLE FUNCTIONS & EVENT-DRIVEN");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📁 Implementation Files:");
        Console.WriteLine("   • 02-Functions/DurableOrderProcessing.cs");
        Console.WriteLine("   • 02-Functions/EventDrivenFunctions.cs\n");

        Console.WriteLine("🎯 Durable Functions Patterns:\n");

        Console.WriteLine("1. Saga Pattern (Compensating Transactions):");
        Console.WriteLine("   ✓ Order validation → Inventory → Payment → Shipping");
        Console.WriteLine("   ✓ Automatic rollback on failure");
        Console.WriteLine("   ✓ Compensation tracking");
        Console.WriteLine("   ✓ State persistence\n");

        Console.WriteLine("2. Human Interaction Pattern:");
        Console.WriteLine("   ✓ Wait for external approval");
        Console.WriteLine("   ✓ Timeout handling (24 hours)");
        Console.WriteLine("   ✓ External event raising");
        Console.WriteLine("   ✓ Cancellation support\n");

        Console.WriteLine("3. Fan-out/Fan-in Pattern:");
        Console.WriteLine("   ✓ Parallel activity execution");
        Console.WriteLine("   ✓ Wait for all completions");
        Console.WriteLine("   ✓ Result aggregation\n");

        Console.WriteLine("4. Sub-orchestrations:");
        Console.WriteLine("   ✓ Shipping monitoring");
        Console.WriteLine("   ✓ Periodic status checks");
        Console.WriteLine("   ✓ Nested workflows\n");

        Console.WriteLine("🎯 Event-Driven Patterns:\n");

        Console.WriteLine("5. Event Sourcing + CQRS:");
        Console.WriteLine("   ✓ Cosmos DB change feed trigger");
        Console.WriteLine("   ✓ Event store persistence");
        Console.WriteLine("   ✓ Read model updates");
        Console.WriteLine("   ✓ Materialized views\n");

        Console.WriteLine("6. Service Bus Session Processing:");
        Console.WriteLine("   ✓ Guaranteed ordering per customer");
        Console.WriteLine("   ✓ Dead-letter queue handling");
        Console.WriteLine("   ✓ Retry policies");
        Console.WriteLine("   ✓ Business validation\n");

        Console.WriteLine("7. Blob Processing Pipeline:");
        Console.WriteLine("   ✓ Image upload trigger");
        Console.WriteLine("   ✓ Validation and processing");
        Console.WriteLine("   ✓ Poison queue for failures");
        Console.WriteLine("   ✓ Retry with exponential backoff\n");

        Console.WriteLine("💡 Code Example (Saga Pattern):");
        Console.WriteLine("```csharp");
        Console.WriteLine("[Function(nameof(OrderOrchestrator))]");
        Console.WriteLine("public async Task<OrderResult> OrderOrchestrator(");
        Console.WriteLine("    [OrchestrationTrigger] TaskOrchestrationContext context)");
        Console.WriteLine("{");
        Console.WriteLine("    var compensations = new List<Func<Task>>();");
        Console.WriteLine("    ");
        Console.WriteLine("    // Reserve inventory");
        Console.WriteLine("    await context.CallActivityAsync(nameof(ReserveInventoryActivity), order);");
        Console.WriteLine("    compensations.Add(() => ");
        Console.WriteLine("        context.CallActivityAsync(nameof(ReleaseInventoryActivity), order));");
        Console.WriteLine("    ");
        Console.WriteLine("    // Process payment");
        Console.WriteLine("    var payment = await context.CallActivityAsync<PaymentResult>(");
        Console.WriteLine("        nameof(ProcessPaymentActivity), order);");
        Console.WriteLine("    ");
        Console.WriteLine("    if (!payment.Success)");
        Console.WriteLine("    {");
        Console.WriteLine("        await ExecuteCompensationsAsync(context, compensations);");
        Console.WriteLine("        return Failed();");
        Console.WriteLine("    }");
        Console.WriteLine("}");
        Console.WriteLine("```\n");

        Console.WriteLine("🏗️ Best Practices:");
        Console.WriteLine("   • Use static HttpClient instances");
        Console.WriteLine("   • Implement idempotency");
        Console.WriteLine("   • Use replay-safe logging");
        Console.WriteLine("   • Handle all exceptions");
        Console.WriteLine("   • Monitor with Application Insights");
    }

    static void DisplayContainerInstancesExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE CONTAINER INSTANCES - ADVANCED SCENARIOS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📁 Implementation File:");
        Console.WriteLine("   • 03-ContainerInstances/ContainerInstanceManager.cs\n");

        Console.WriteLine("🎯 Advanced Features:\n");

        Console.WriteLine("1. Multi-Container Groups (Sidecar Pattern):");
        Console.WriteLine("   ✓ Main application container");
        Console.WriteLine("   ✓ Fluentd logging sidecar");
        Console.WriteLine("   ✓ Prometheus metrics sidecar");
        Console.WriteLine("   ✓ Shared networking (localhost)\n");

        Console.WriteLine("2. Init Containers:");
        Console.WriteLine("   ✓ Database migrations");
        Console.WriteLine("   ✓ Configuration setup");
        Console.WriteLine("   ✓ Dependency checks");
        Console.WriteLine("   ✓ Run before main containers\n");

        Console.WriteLine("3. GPU Support:");
        Console.WriteLine("   ✓ ML/AI model inference");
        Console.WriteLine("   ✓ GPU SKUs (K80, P100, V100)");
        Console.WriteLine("   ✓ NVIDIA drivers included");
        Console.WriteLine("   ✓ Batch processing\n");

        Console.WriteLine("4. VNet Integration:");
        Console.WriteLine("   ✓ Private IP addresses");
        Console.WriteLine("   ✓ Subnet delegation");
        Console.WriteLine("   ✓ Secure communication");
        Console.WriteLine("   ✓ Network policies\n");

        Console.WriteLine("5. Volume Mounts:");
        Console.WriteLine("   ✓ Azure Files integration");
        Console.WriteLine("   ✓ Shared storage between containers");
        Console.WriteLine("   ✓ Persistent data");
        Console.WriteLine("   ✓ Configuration files\n");

        Console.WriteLine("💡 Use Cases:");
        Console.WriteLine("   • Batch processing jobs");
        Console.WriteLine("   • CI/CD build agents");
        Console.WriteLine("   • ML model inference");
        Console.WriteLine("   • Data processing pipelines");
        Console.WriteLine("   • Short-lived workloads\n");

        Console.WriteLine("⚡ When to Use ACI vs. AKS:");
        Console.WriteLine("   ACI:");
        Console.WriteLine("   ✓ Simple container workloads");
        Console.WriteLine("   ✓ Fast startup needed");
        Console.WriteLine("   ✓ Isolated execution");
        Console.WriteLine("   ✓ No orchestration needed");
        Console.WriteLine();
        Console.WriteLine("   AKS:");
        Console.WriteLine("   ✓ Complex microservices");
        Console.WriteLine("   ✓ Advanced networking");
        Console.WriteLine("   ✓ Service discovery");
        Console.WriteLine("   ✓ Full Kubernetes features");
    }

    static void DisplayAksExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE KUBERNETES SERVICE - PRODUCTION-READY");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📁 Implementation File:");
        Console.WriteLine("   • 04-AKS/AksClusterManager.cs\n");

        Console.WriteLine("🎯 Production Features:\n");

        Console.WriteLine("1. Node Pools:");
        Console.WriteLine("   ✓ System pool (critical system pods)");
        Console.WriteLine("   ✓ User pool (application workloads)");
        Console.WriteLine("   ✓ Spot VM pool (cost optimization)");
        Console.WriteLine("   ✓ Node taints and labels");
        Console.WriteLine("   ✓ Availability zones (HA)\n");

        Console.WriteLine("2. Security:");
        Console.WriteLine("   ✓ Azure AD integration");
        Console.WriteLine("   ✓ Azure RBAC");
        Console.WriteLine("   ✓ Network policies");
        Console.WriteLine("   ✓ Pod Security Standards");
        Console.WriteLine("   ✓ Azure Key Vault CSI Driver");
        Console.WriteLine("   ✓ Private cluster option\n");

        Console.WriteLine("3. Networking:");
        Console.WriteLine("   ✓ Azure CNI");
        Console.WriteLine("   ✓ Network policies");
        Console.WriteLine("   ✓ Ingress with TLS");
        Console.WriteLine("   ✓ Load balancer");
        Console.WriteLine("   ✓ Application Gateway\n");

        Console.WriteLine("4. Scaling:");
        Console.WriteLine("   ✓ Horizontal Pod Autoscaler (HPA)");
        Console.WriteLine("   ✓ Cluster Autoscaler");
        Console.WriteLine("   ✓ KEDA (event-driven)");
        Console.WriteLine("   ✓ Custom metrics\n");

        Console.WriteLine("5. Monitoring:");
        Console.WriteLine("   ✓ Azure Monitor for Containers");
        Console.WriteLine("   ✓ Log Analytics integration");
        Console.WriteLine("   ✓ Prometheus metrics");
        Console.WriteLine("   ✓ Azure Defender for Kubernetes\n");

        Console.WriteLine("💡 Deployment Example:");
        Console.WriteLine("```csharp");
        Console.WriteLine("await aksManager.DeployApplicationAsync(");
        Console.WriteLine("    \"prod-cluster\",");
        Console.WriteLine("    new ApplicationDeployment");
        Console.WriteLine("    {");
        Console.WriteLine("        Name = \"my-api\",");
        Console.WriteLine("        Namespace = \"production\",");
        Console.WriteLine("        Image = \"myacr.azurecr.io/api:v1.0\",");
        Console.WriteLine("        Replicas = 3,");
        Console.WriteLine("        EnableAutoScaling = true,");
        Console.WriteLine("        MinReplicas = 2,");
        Console.WriteLine("        MaxReplicas = 10");
        Console.WriteLine("    });");
        Console.WriteLine("```\n");

        Console.WriteLine("🏗️ Best Practices:");
        Console.WriteLine("   • Separate system and user workloads");
        Console.WriteLine("   • Use availability zones");
        Console.WriteLine("   • Implement resource quotas");
        Console.WriteLine("   • Configure pod anti-affinity");
        Console.WriteLine("   • Use network policies");
        Console.WriteLine("   • Regular version upgrades");
        Console.WriteLine("   • Implement GitOps (Flux/ArgoCD)");
    }

    static void DisplayContainerAppsExamples()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZURE CONTAINER APPS - MICROSERVICES & DAPR");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📁 Implementation File:");
        Console.WriteLine("   • 05-ContainerApps/ContainerAppsManager.cs\n");

        Console.WriteLine("🎯 Key Features:\n");

        Console.WriteLine("1. Dapr Integration:");
        Console.WriteLine("   ✓ Service-to-service invocation");
        Console.WriteLine("   ✓ State management (Redis)");
        Console.WriteLine("   ✓ Pub/Sub (Service Bus)");
        Console.WriteLine("   ✓ Bindings");
        Console.WriteLine("   ✓ Secrets management\n");

        Console.WriteLine("2. KEDA Auto-scaling:");
        Console.WriteLine("   ✓ HTTP requests");
        Console.WriteLine("   ✓ Service Bus queue depth");
        Console.WriteLine("   ✓ Azure Storage queue");
        Console.WriteLine("   ✓ Custom metrics");
        Console.WriteLine("   ✓ Scale to zero\n");

        Console.WriteLine("3. Traffic Management:");
        Console.WriteLine("   ✓ Multiple revisions");
        Console.WriteLine("   ✓ Traffic splitting");
        Console.WriteLine("   ✓ Blue-green deployments");
        Console.WriteLine("   ✓ Canary releases");
        Console.WriteLine("   ✓ A/B testing\n");

        Console.WriteLine("4. Networking:");
        Console.WriteLine("   ✓ External/Internal ingress");
        Console.WriteLine("   ✓ VNet integration");
        Console.WriteLine("   ✓ Custom domains");
        Console.WriteLine("   ✓ TLS certificates\n");

        Console.WriteLine("💡 Microservices Example:");
        Console.WriteLine("```csharp");
        Console.WriteLine("var microservices = await containerAppsManager");
        Console.WriteLine("    .DeployMicroservicesAsync(");
        Console.WriteLine("        environmentId,");
        Console.WriteLine("        new MicroservicesConfiguration");
        Console.WriteLine("        {");
        Console.WriteLine("            GatewayImage = \"myacr.azurecr.io/gateway\",");
        Console.WriteLine("            ServiceAImage = \"myacr.azurecr.io/service-a\",");
        Console.WriteLine("            ServiceBImage = \"myacr.azurecr.io/service-b\",");
        Console.WriteLine("            // Dapr components automatically configured");
        Console.WriteLine("        });");
        Console.WriteLine("```\n");

        Console.WriteLine("🏗️ Architecture Patterns:");
        Console.WriteLine("   • API Gateway pattern");
        Console.WriteLine("   • Service mesh (Dapr)");
        Console.WriteLine("   • Event-driven microservices");
        Console.WriteLine("   • CQRS with separate read/write services");
        Console.WriteLine("   • Saga pattern with Dapr workflow\n");

        Console.WriteLine("⚡ Container Apps vs. AKS:");
        Console.WriteLine("   Container Apps:");
        Console.WriteLine("   ✓ Simpler management");
        Console.WriteLine("   ✓ Built-in Dapr");
        Console.WriteLine("   ✓ KEDA auto-scaling");
        Console.WriteLine("   ✓ Scale to zero");
        Console.WriteLine("   ✓ Managed infrastructure");
        Console.WriteLine();
        Console.WriteLine("   AKS:");
        Console.WriteLine("   ✓ Full Kubernetes control");
        Console.WriteLine("   ✓ Custom operators");
        Console.WriteLine("   ✓ Advanced networking");
        Console.WriteLine("   ✓ Stateful workloads");
    }

    static void DisplayArchitecturePatterns()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  ARCHITECTURE PATTERNS & DESIGN DECISIONS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("🏗️ MICROSERVICES PATTERNS:\n");
        Console.WriteLine("1. API Gateway Pattern");
        Console.WriteLine("   • Single entry point for clients");
        Console.WriteLine("   • Request routing and composition");
        Console.WriteLine("   • Authentication/authorization");
        Console.WriteLine("   • Rate limiting and caching\n");

        Console.WriteLine("2. Saga Pattern (Distributed Transactions)");
        Console.WriteLine("   • Sequence of local transactions");
        Console.WriteLine("   • Compensating transactions for rollback");
        Console.WriteLine("   • Eventual consistency");
        Console.WriteLine("   • Implemented in: Durable Functions\n");

        Console.WriteLine("3. Event Sourcing + CQRS");
        Console.WriteLine("   • Store events, not current state");
        Console.WriteLine("   • Separate read and write models");
        Console.WriteLine("   • Audit trail and replay capability");
        Console.WriteLine("   • Implemented in: Functions + Cosmos DB\n");

        Console.WriteLine("4. Sidecar Pattern");
        Console.WriteLine("   • Extend functionality without code changes");
        Console.WriteLine("   • Logging, monitoring, proxying");
        Console.WriteLine("   • Implemented in: ACI multi-container, Dapr\n");

        Console.WriteLine("5. Circuit Breaker Pattern");
        Console.WriteLine("   • Prevent cascade failures");
        Console.WriteLine("   • Fast fail for unhealthy services");
        Console.WriteLine("   • Implemented in: Polly policies\n");

        Console.WriteLine("🎯 CHOOSING THE RIGHT SERVICE:\n");
        Console.WriteLine("┌──────────────────┬─────────────────────────────────────┐");
        Console.WriteLine("│ Scenario         │ Recommended Service                 │");
        Console.WriteLine("├──────────────────┼─────────────────────────────────────┤");
        Console.WriteLine("│ Web Application  │ App Service (PaaS, easy management) │");
        Console.WriteLine("│ API Backend      │ App Service or Container Apps       │");
        Console.WriteLine("│ Event Processing │ Azure Functions (serverless)        │");
        Console.WriteLine("│ Batch Jobs       │ Functions or ACI (burst scaling)    │");
        Console.WriteLine("│ Microservices    │ Container Apps (Dapr) or AKS        │");
        Console.WriteLine("│ ML Inference     │ ACI with GPU or AKS                 │");
        Console.WriteLine("│ Complex Workflows│ Durable Functions                   │");
        Console.WriteLine("│ Legacy Migration │ AKS (Kubernetes compatibility)      │");
        Console.WriteLine("└──────────────────┴─────────────────────────────────────┘\n");

        Console.WriteLine("💰 COST OPTIMIZATION STRATEGIES:\n");
        Console.WriteLine("1. Right-sizing:");
        Console.WriteLine("   • Start small, scale based on metrics");
        Console.WriteLine("   • Use monitoring data for sizing decisions\n");

        Console.WriteLine("2. Auto-scaling:");
        Console.WriteLine("   • Scale out during peak hours");
        Console.WriteLine("   • Scale in during off-hours");
        Console.WriteLine("   • Functions: Use Consumption for variable load\n");

        Console.WriteLine("3. Spot Instances:");
        Console.WriteLine("   • AKS: Use spot node pools (60-80% savings)");
        Console.WriteLine("   • Container Apps: Spot support coming\n");

        Console.WriteLine("4. Reserved Instances:");
        Console.WriteLine("   • 1-year or 3-year commitments");
        Console.WriteLine("   • Up to 72% savings for predictable workloads");
    }

    static void DisplayBestPractices()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  BEST PRACTICES & SECURITY");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("🔒 SECURITY BEST PRACTICES:\n");
        Console.WriteLine("1. Identity & Access:");
        Console.WriteLine("   ✓ Use Managed Identities (never hardcode credentials)");
        Console.WriteLine("   ✓ Azure RBAC for fine-grained access control");
        Console.WriteLine("   ✓ Principle of least privilege");
        Console.WriteLine("   ✓ Regular access reviews\n");

        Console.WriteLine("2. Secrets Management:");
        Console.WriteLine("   ✓ Store all secrets in Azure Key Vault");
        Console.WriteLine("   ✓ Use Key Vault references in App Settings");
        Console.WriteLine("   ✓ Enable secret rotation");
        Console.WriteLine("   ✓ Never commit secrets to source control\n");

        Console.WriteLine("3. Network Security:");
        Console.WriteLine("   ✓ Use Private Endpoints for Azure services");
        Console.WriteLine("   ✓ Network Security Groups (NSGs)");
        Console.WriteLine("   ✓ Application Gateway with WAF");
        Console.WriteLine("   ✓ DDoS Protection Standard\n");

        Console.WriteLine("4. Container Security:");
        Console.WriteLine("   ✓ Scan images for vulnerabilities");
        Console.WriteLine("   ✓ Use minimal base images");
        Console.WriteLine("   ✓ Run containers as non-root");
        Console.WriteLine("   ✓ Implement pod security policies\n");

        Console.WriteLine("📊 MONITORING & OBSERVABILITY:\n");
        Console.WriteLine("1. Application Insights:");
        Console.WriteLine("   • Request tracking and dependencies");
        Console.WriteLine("   • Custom events and metrics");
        Console.WriteLine("   • Distributed tracing");
        Console.WriteLine("   • Live metrics stream\n");

        Console.WriteLine("2. Log Analytics:");
        Console.WriteLine("   • Centralized log aggregation");
        Console.WriteLine("   • KQL queries for analysis");
        Console.WriteLine("   • Workbooks for visualization");
        Console.WriteLine("   • Alerts on anomalies\n");

        Console.WriteLine("3. Key Metrics:");
        Console.WriteLine("   • Response time (p50, p95, p99)");
        Console.WriteLine("   • Error rate (< 0.1%)");
        Console.WriteLine("   • Throughput (requests/sec)");
        Console.WriteLine("   • Availability (>= 99.9%)\n");

        Console.WriteLine("⚡ PERFORMANCE OPTIMIZATION:\n");
        Console.WriteLine("1. Caching:");
        Console.WriteLine("   • Azure Cache for Redis");
        Console.WriteLine("   • CDN for static content");
        Console.WriteLine("   • Application-level caching\n");

        Console.WriteLine("2. Database:");
        Console.WriteLine("   • Connection pooling");
        Console.WriteLine("   • Query optimization");
        Console.WriteLine("   • Async I/O operations\n");

        Console.WriteLine("3. Code:");
        Console.WriteLine("   • Static HttpClient instances");
        Console.WriteLine("   • Async/await properly");
        Console.WriteLine("   • Avoid blocking calls");
        Console.WriteLine("   • Use bulk operations\n");

        Console.WriteLine("🚀 DEPLOYMENT BEST PRACTICES:\n");
        Console.WriteLine("1. CI/CD:");
        Console.WriteLine("   • Automated testing");
        Console.WriteLine("   • Infrastructure as Code");
        Console.WriteLine("   • GitOps for Kubernetes");
        Console.WriteLine("   • Blue-green deployments\n");

        Console.WriteLine("2. Resilience:");
        Console.WriteLine("   • Retry with exponential backoff");
        Console.WriteLine("   • Circuit breaker pattern");
        Console.WriteLine("   • Timeout policies");
        Console.WriteLine("   • Graceful degradation");
    }

    static void DisplayInterviewQuestions()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  ADVANCED INTERVIEW QUESTIONS FOR ARCHITECTS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("❓ SCENARIO-BASED QUESTIONS:\n");

        Console.WriteLine("Q1: Design a highly available e-commerce system on Azure");
        Console.WriteLine("    that can handle 100,000 concurrent users.\n");
        Console.WriteLine("A: Multi-region architecture:");
        Console.WriteLine("   • App Service with Traffic Manager (geo-distribution)");
        Console.WriteLine("   • Azure Cache for Redis (session state)");
        Console.WriteLine("   • Azure SQL with geo-replication");
        Console.WriteLine("   • Azure CDN for static content");
        Console.WriteLine("   • Functions for order processing");
        Console.WriteLine("   • Service Bus for reliable messaging");
        Console.WriteLine("   • Application Gateway with WAF\n");

        Console.WriteLine("Q2: How would you implement a saga pattern for a distributed");
        Console.WriteLine("    transaction spanning multiple microservices?\n");
        Console.WriteLine("A: Using Durable Functions:");
        Console.WriteLine("   • Orchestrator function coordinates workflow");
        Console.WriteLine("   • Activity functions for each service call");
        Console.WriteLine("   • Store compensating actions in a list");
        Console.WriteLine("   • On failure, execute compensations in reverse");
        Console.WriteLine("   • Use try-catch with proper error handling");
        Console.WriteLine("   • Monitor with Application Insights\n");

        Console.WriteLine("Q3: Your AKS cluster is experiencing high costs. How do you");
        Console.WriteLine("    optimize without impacting performance?\n");
        Console.WriteLine("A: Multi-pronged approach:");
        Console.WriteLine("   • Enable cluster autoscaler");
        Console.WriteLine("   • Implement HPA for applications");
        Console.WriteLine("   • Use spot VMs for non-critical workloads");
        Console.WriteLine("   • Right-size pods (CPU/memory requests)");
        Console.WriteLine("   • Implement pod disruption budgets");
        Console.WriteLine("   • Review and remove unused resources");
        Console.WriteLine("   • Consider reserved instances\n");

        Console.WriteLine("Q4: Explain cold start in Azure Functions and mitigation");
        Console.WriteLine("    strategies for a latency-sensitive API.\n");
        Console.WriteLine("A: Cold start occurs when:");
        Console.WriteLine("   • Function hasn't run recently");
        Console.WriteLine("   • Runtime needs initialization");
        Console.WriteLine("   • Can take 1-10 seconds\n");
        Console.WriteLine("   Mitigation:");
        Console.WriteLine("   • Premium Plan (pre-warmed instances)");
        Console.WriteLine("   • Keep functions warm (timer trigger)");
        Console.WriteLine("   • Optimize dependencies");
        Console.WriteLine("   • Consider App Service for consistent latency\n");

        Console.WriteLine("Q5: Design a disaster recovery strategy for a critical");
        Console.WriteLine("    application with RPO=15min, RTO=1hour.\n");
        Console.WriteLine("A: Active-passive setup:");
        Console.WriteLine("   • Primary region: Full deployment");
        Console.WriteLine("   • Secondary region: Warm standby");
        Console.WriteLine("   • Azure SQL geo-replication (continuous)");
        Console.WriteLine("   • Azure Storage geo-redundant");
        Console.WriteLine("   • Traffic Manager for automatic failover");
        Console.WriteLine("   • Regular DR drills");
        Console.WriteLine("   • Backup every 15 minutes\n");

        Console.WriteLine("💡 TECHNICAL DEEP-DIVE QUESTIONS:\n");

        Console.WriteLine("Q6: What's the difference between HPA and Cluster Autoscaler");
        Console.WriteLine("    in AKS?\n");
        Console.WriteLine("A:");
        Console.WriteLine("   HPA (Horizontal Pod Autoscaler):");
        Console.WriteLine("   • Scales number of pod replicas");
        Console.WriteLine("   • Based on CPU, memory, or custom metrics");
        Console.WriteLine("   • Works within existing cluster capacity\n");
        Console.WriteLine("   Cluster Autoscaler:");
        Console.WriteLine("   • Scales number of nodes in cluster");
        Console.WriteLine("   • Triggered when pods can't be scheduled");
        Console.WriteLine("   • Adds/removes VM instances");
        Console.WriteLine("   • Works together with HPA\n");

        Console.WriteLine("Q7: Explain the difference between Container Apps revisions");
        Console.WriteLine("    and AKS deployments.\n");
        Console.WriteLine("A:");
        Console.WriteLine("   Container Apps Revisions:");
        Console.WriteLine("   • Immutable snapshots");
        Console.WriteLine("   • Built-in traffic splitting");
        Console.WriteLine("   • Simple version management");
        Console.WriteLine("   • Platform-managed\n");
        Console.WriteLine("   AKS Deployments:");
        Console.WriteLine("   • Rolling updates with strategies");
        Console.WriteLine("   • More control over rollout");
        Console.WriteLine("   • Requires manual traffic management");
        Console.WriteLine("   • Self-managed\n");

        Console.WriteLine("Q8: When would you choose Durable Functions over Logic Apps?");
        Console.WriteLine("A:");
        Console.WriteLine("   Durable Functions:");
        Console.WriteLine("   • Complex business logic");
        Console.WriteLine("   • Custom error handling");
        Console.WriteLine("   • Code-first approach");
        Console.WriteLine("   • Better for developers\n");
        Console.WriteLine("   Logic Apps:");
        Console.WriteLine("   • Visual workflow design");
        Console.WriteLine("   • Enterprise integration");
        Console.WriteLine("   • No-code/low-code");
        Console.WriteLine("   • Better for integrators");
    }

    static void DisplayExamTips()
    {
        Console.Clear();
        Console.WriteLine("═══════════════════════════════════════════════════════════");
        Console.WriteLine("  AZ-204 EXAM TIPS FOR ARCHITECTS");
        Console.WriteLine("═══════════════════════════════════════════════════════════\n");

        Console.WriteLine("📝 EXAM STRUCTURE:\n");
        Console.WriteLine("• 40-60 questions");
        Console.WriteLine("• 150 minutes");
        Console.WriteLine("• Passing score: 700/1000");
        Console.WriteLine("• Question types: Multiple choice, drag-and-drop, case studies\n");

        Console.WriteLine("🎯 MODULE 1 FOCUS AREAS (25-30%):\n");

        Console.WriteLine("1. App Service (HIGH PRIORITY):");
        Console.WriteLine("   ⚡ Deployment slots - swap, warm-up, settings");
        Console.WriteLine("   ⚡ Auto-scaling rules and metrics");
        Console.WriteLine("   ⚡ App Service Plans and tiers");
        Console.WriteLine("   ⚡ Authentication providers");
        Console.WriteLine("   ⚡ Custom domains and SSL\n");

        Console.WriteLine("2. Azure Functions (HIGH PRIORITY):");
        Console.WriteLine("   ⚡ Triggers and bindings (all types)");
        Console.WriteLine("   ⚡ Durable Functions patterns");
        Console.WriteLine("   ⚡ Hosting plans differences");
        Console.WriteLine("   ⚡ Function.json vs. attributes");
        Console.WriteLine("   ⚡ Cold start mitigation\n");

        Console.WriteLine("3. Container Services (MEDIUM PRIORITY):");
        Console.WriteLine("   ⚡ ACI vs. AKS vs. Container Apps");
        Console.WriteLine("   ⚡ When to use each service");
        Console.WriteLine("   ⚡ AKS node pools and scaling");
        Console.WriteLine("   ⚡ Container Apps Dapr integration");
        Console.WriteLine("   ⚡ KEDA scaling triggers\n");

        Console.WriteLine("💡 COMMON EXAM SCENARIOS:\n");

        Console.WriteLine("Scenario 1: Zero-downtime deployment");
        Console.WriteLine("→ Answer: Deployment slots with swap\n");

        Console.WriteLine("Scenario 2: Handle 10,000 files uploaded to blob");
        Console.WriteLine("→ Answer: Blob trigger Function with queue output\n");

        Console.WriteLine("Scenario 3: Long-running workflow with approval");
        Console.WriteLine("→ Answer: Durable Functions with human interaction\n");

        Console.WriteLine("Scenario 4: Microservices with service-to-service calls");
        Console.WriteLine("→ Answer: Container Apps with Dapr\n");

        Console.WriteLine("Scenario 5: Batch ML inference with GPU");
        Console.WriteLine("→ Answer: ACI with GPU support\n");

        Console.WriteLine("🚫 COMMON MISTAKES TO AVOID:\n");
        Console.WriteLine("• Confusing slot settings vs. regular settings");
        Console.WriteLine("• Not knowing binding directions (in, out, inout)");
        Console.WriteLine("• Forgetting cold start issues with Consumption Plan");
        Console.WriteLine("• Mixing up HPA vs. Cluster Autoscaler");
        Console.WriteLine("• Not considering cost in solution design\n");

        Console.WriteLine("📚 WHAT TO MEMORIZE:\n");
        Console.WriteLine("✓ App Service Plan tiers and features");
        Console.WriteLine("✓ Function hosting plans comparison");
        Console.WriteLine("✓ All trigger types and their properties");
        Console.WriteLine("✓ Durable Functions patterns (6 patterns)");
        Console.WriteLine("✓ AKS components (node pools, ingress, etc.)");
        Console.WriteLine("✓ Container Apps scaling rules\n");

        Console.WriteLine("⏰ TIME MANAGEMENT:\n");
        Console.WriteLine("• Spend 2-3 minutes per question");
        Console.WriteLine("• Mark difficult questions for review");
        Console.WriteLine("• Case studies: Read questions first");
        Console.WriteLine("• Budget 30 minutes for review\n");

        Console.WriteLine("🎓 FINAL PREPARATION:");
        Console.WriteLine("1. Hands-on labs (CRITICAL)");
        Console.WriteLine("2. Review Microsoft Learn modules");
        Console.WriteLine("3. Practice exams (MeasureUp, Whizlabs)");
        Console.WriteLine("4. Review service limitations and quotas");
        Console.WriteLine("5. Sleep well before exam!");
    }
}
