# Mosquitto MQTT Broker Configuration
# =====================================

# Network Settings
# ----------------
listener 1883
protocol mqtt

# WebSocket listener (optional - for browser clients)
listener 9001
protocol websockets

# Allow anonymous connections (for development only)
# For production, use authentication
allow_anonymous true

# Persistence Settings
# ---------------------
# Save in-memory database to disk
persistence true
persistence_location /mosquitto/data/

# Logging Settings
# ----------------
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Log types: error, warning, notice, information, all, debug
log_type error
log_type warning
log_type notice
log_type information

# Log timestamp format
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# Connection Settings
# -------------------
# Maximum simultaneous client connections (-1 = unlimited)
max_connections -1

# Maximum QoS level (0, 1, or 2)
max_qos 2

# Message size limit (0 = unlimited)
message_size_limit 0

# Retain messages
# ---------------
# Allow retained messages
retain_available true

# Maximum number of queued messages per client
max_queued_messages 1000

# Security Settings (Disabled for Development)
# ---------------------------------------------
# For production, uncomment and configure:
# password_file /mosquitto/config/passwd
# acl_file /mosquitto/config/acl

# Quality of Service
# ------------------
# Upgrade outgoing QoS if incoming is higher
upgrade_outgoing_qos false

# Queue messages for disconnected clients
queue_qos0_messages false

# Performance Tuning
# ------------------
# Autosave interval (seconds) - 0 = only on shutdown
autosave_interval 1800

# Keep-alive timeout (seconds)
# 0 = disable keep-alive
# Default is typically 60 seconds
# Clients can override this

# Connection Messages
# -------------------
# Send connection/disconnection messages to $SYS/broker/connection
connection_messages true

# System Messages
# ---------------
# Publish system messages to $SYS topics
# Shows broker statistics and information
sys_interval 10
